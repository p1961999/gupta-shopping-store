<div class="product-card">

  <div class="image-container">
    <img [src]="cleanedImageUrl[0]" [alt]="product?.category?.name" class="product-image" (click)="navigateToDetail(product?.id)"/>
  </div>

  <div class="d-flex row align-items-center p-3">

    <span class="product-title" (click)="navigateToDetail(product?.id)">{{ product?.category.name }}</span>
    <span class="product-description" (click)="navigateToDetail(product?.id)">{{ product.title | ngGenericPipe: truncateText}}</span>

    <div class="d-flex justify-content-between align-items-center gap-3 mt-1">
      <span class="current-price" (click)="navigateToDetail(product?.id)">Rs. {{ product.price }}</span>
      <div *ngIf="product.id | ngGenericPipe: isProductInCart; else addToBagTemplate" class="quantity-selector">
        <button (click)="decreaseQuantity()">-</button>
        <span>{{ quantity }}</span>
        <button (click)="increaseQuantity()">+</button>
      </div>
      
      <ng-template #addToBagTemplate>
        <button class="add-to-bag-btn" (click)="addToBag(product)">Add to Bag</button>
      </ng-template>
    </div>
  </div>
</div>
